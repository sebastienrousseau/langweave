<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Translates a given text with intelligent fallback handling."><title>translate_with_fallback in langweave::translations - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-b7b9f40b.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="langweave" data-themes="" data-resource-suffix="" data-rustdoc-version="1.95.0-nightly (7f99507f5 2026-02-19)" data-channel="nightly" data-search-js="search-63369b7b.js" data-stringdex-js="stringdex-b897f86f.js" data-settings-js="settings-170eb4bf.js" ><script src="../../static.files/storage-41dd4d93.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-5013f961.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-f7c3ffd8.css"></noscript><link rel="icon" href="https://kura.pro/langweave/images/favicon.ico"></head><body class="rustdoc fn"><a class="skip-main-content" href="#main-content">Skip to main content</a><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">translate_with_fallback</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../langweave/index.html"><img src="https://kura.pro/langweave/images/logos/langweave.svg" alt="logo"></a><h2><a href="../../langweave/index.html">langweave</a><span class="version">0.0.2</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">translate_<wbr>with_<wbr>fallback</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#arguments" title="Arguments">Arguments</a></li><li><a href="#returns" title="Returns">Returns</a></li><li><a href="#fallback-logic" title="Fallback Logic">Fallback Logic</a></li><li><a href="#examples" title="Examples">Examples</a></li><li><a href="#errors" title="Errors">Errors</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="index.html">In langweave::<wbr>translations</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content" tabindex="-1"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">langweave</a>::<wbr><a href="index.html">translations</a></div><h1>Function <span class="fn">translate_<wbr>with_<wbr>fallback</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/langweave/translations.rs.html#347-375">Source</a> </span></div><pre class="rust item-decl"><code>pub fn translate_with_fallback(
    lang: &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>,
    text: &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>, <a class="enum" href="../error/enum.I18nError.html" title="enum langweave::error::I18nError">I18nError</a>&gt;</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Translates a given text with intelligent fallback handling.</p>
<p>This function attempts to translate text and applies fallback logic for simple keys.
For simple keys (single words without complex punctuation), it falls back to the
original text when translation is not found. For complex phrases, it returns an error.</p>
<h2 id="arguments"><a class="doc-anchor" href="#arguments">§</a>Arguments</h2>
<ul>
<li><code>lang</code> - A string slice that holds the language code (e.g., “en”, “fr”, “de”)</li>
<li><code>text</code> - A string slice that holds the text to be translated</li>
</ul>
<h2 id="returns"><a class="doc-anchor" href="#returns">§</a>Returns</h2>
<ul>
<li><code>Ok(String)</code> - The translated text, or the original text for simple keys when translation fails</li>
<li><code>Err(I18nError)</code> - An error if the language is unsupported or translation fails for complex phrases</li>
</ul>
<h2 id="fallback-logic"><a class="doc-anchor" href="#fallback-logic">§</a>Fallback Logic</h2>
<ul>
<li><strong>Simple keys</strong> (no spaces, commas, question marks, or exclamation marks): Fall back to original text</li>
<li><strong>Complex phrases</strong> (containing spaces or punctuation): Return TranslationFailed error</li>
</ul>
<h2 id="examples"><a class="doc-anchor" href="#examples">§</a>Examples</h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>langweave::translations::translate_with_fallback;

<span class="comment">// Successful translation
</span><span class="kw">let </span>result = translate_with_fallback(<span class="string">"fr"</span>, <span class="string">"Hello"</span>);
<span class="macro">assert_eq!</span>(result.unwrap(), <span class="string">"Bonjour"</span>);

<span class="comment">// Simple key fallback (if "SimpleKey" not in dictionary)
</span><span class="kw">let </span>result = translate_with_fallback(<span class="string">"fr"</span>, <span class="string">"SimpleKey"</span>);
<span class="comment">// Returns Ok("SimpleKey") - falls back to original

// Complex phrase error (if not in dictionary)
</span><span class="kw">let </span>result = translate_with_fallback(<span class="string">"fr"</span>, <span class="string">"Complex phrase with spaces"</span>);
<span class="comment">// Returns Err(I18nError::TranslationFailed(...))</span></code></pre></div><h2 id="errors"><a class="doc-anchor" href="#errors">§</a>Errors</h2>
<p>This function will return an error if:</p>
<ul>
<li>The specified language is not supported</li>
<li>Translation fails for complex phrases (containing spaces or punctuation)</li>
</ul>
</div></details></section></div></main></body></html>